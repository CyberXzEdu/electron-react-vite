{"version":3,"sources":["..\\electron\\index.ts"],"sourcesContent":["import { app, BrowserWindow, shell, ipcMain } from \"electron\";\r\n//import { release } from \"node:os\";\r\nimport { join } from \"node:path\";\r\n\r\nprocess.env.DIST_ELECTRON = join(__dirname, \"../\");\r\nprocess.env.DIST = join(process.env.DIST_ELECTRON, \"../dist\");\r\nprocess.env.PUBLIC = process.env.VITE_DEV_SERVER_URL ? join(process.env.DIST_ELECTRON, \"../public\") : process.env.DIST;\r\n\r\n//process.env[\"ELECTRON_DISABLE_SECURITY_WARNINGS\"] = \"true\";\r\n\r\nif (process.platform === \"win32\") app.setAppUserModelId(app.getName());\r\n\r\napp.on(\"window-all-closed\", () => app.quit());\r\n\r\n//const preload = join(__dirname, \"../preload.js\");\r\nconst url = process.env.VITE_DEV_SERVER_URL;\r\nconst indexHtml = join(process.env.DIST, \"index.html\");\r\n\r\nfunction createWindow () {\r\n  const mainWindow = new BrowserWindow({\r\n    width: 800,\r\n    height: 625,\r\n    resizable: false,\r\n    autoHideMenuBar: true,\r\n    webPreferences: {\r\n      contextIsolation: false,\r\n      nodeIntegration: true\r\n    }\r\n  });\r\n\r\n  if (process.env.VITE_DEV_SERVER_URL) {\r\n    mainWindow.loadURL(url);\r\n    //mainWindow.webContents.openDevTools();\r\n  }\r\n  else mainWindow.loadFile(indexHtml);\r\n\r\n  mainWindow.webContents.setWindowOpenHandler(({ url }) => {\r\n    if (url.startsWith(\"https:\")) shell.openExternal(url);\r\n    return { action: \"deny\" };\r\n  });\r\n}\r\n\r\napp.on(\"ready\", createWindow);\r\n\r\n\r\n\r\nipcMain.handle(\"message\", (data) => {\r\n  console.log(data);\r\n});\r\n\r\nipcMain.handle(\"create-new-window\", (_, code) => {\r\n  const childWindow = new BrowserWindow({\r\n    width: 800,\r\n    height: 625,\r\n    resizable: false,\r\n    autoHideMenuBar: true,\r\n    title: \"Child \" + code,\r\n    webPreferences: {\r\n      contextIsolation: false,\r\n      nodeIntegration: true\r\n    }\r\n  });\r\n\r\n  if (process.env.VITE_DEV_SERVER_URL) childWindow.loadURL(`${url}#${code}`);\r\n  \r\n  else childWindow.loadFile(indexHtml, { hash: code });\r\n  \r\n});"],"mappings":"AAAA,sBAAmD;AAEnD,uBAAqB;AAErB,QAAQ,IAAI,oBAAgB,uBAAK,WAAW,KAAK;AACjD,QAAQ,IAAI,WAAO,uBAAK,QAAQ,IAAI,eAAe,SAAS;AAC5D,QAAQ,IAAI,SAAS,QAAQ,IAAI,0BAAsB,uBAAK,QAAQ,IAAI,eAAe,WAAW,IAAI,QAAQ,IAAI;AAIlH,IAAI,QAAQ,aAAa;AAAS,sBAAI,kBAAkB,oBAAI,QAAQ,CAAC;AAErE,oBAAI,GAAG,qBAAqB,MAAM,oBAAI,KAAK,CAAC;AAG5C,MAAM,MAAM,QAAQ,IAAI;AACxB,MAAM,gBAAY,uBAAK,QAAQ,IAAI,MAAM,YAAY;AAErD,SAAS,eAAgB;AACvB,QAAM,aAAa,IAAI,8BAAc;AAAA,IACnC,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,WAAW;AAAA,IACX,iBAAiB;AAAA,IACjB,gBAAgB;AAAA,MACd,kBAAkB;AAAA,MAClB,iBAAiB;AAAA,IACnB;AAAA,EACF,CAAC;AAED,MAAI,QAAQ,IAAI,qBAAqB;AACnC,eAAW,QAAQ,GAAG;AAAA,EAExB;AACK,eAAW,SAAS,SAAS;AAElC,aAAW,YAAY,qBAAqB,CAAC,EAAE,KAAAA,KAAI,MAAM;AACvD,QAAIA,KAAI,WAAW,QAAQ;AAAG,4BAAM,aAAaA,IAAG;AACpD,WAAO,EAAE,QAAQ,OAAO;AAAA,EAC1B,CAAC;AACH;AAEA,oBAAI,GAAG,SAAS,YAAY;AAI5B,wBAAQ,OAAO,WAAW,CAAC,SAAS;AAClC,UAAQ,IAAI,IAAI;AAClB,CAAC;AAED,wBAAQ,OAAO,qBAAqB,CAAC,GAAG,SAAS;AAC/C,QAAM,cAAc,IAAI,8BAAc;AAAA,IACpC,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,WAAW;AAAA,IACX,iBAAiB;AAAA,IACjB,OAAO,WAAW;AAAA,IAClB,gBAAgB;AAAA,MACd,kBAAkB;AAAA,MAClB,iBAAiB;AAAA,IACnB;AAAA,EACF,CAAC;AAED,MAAI,QAAQ,IAAI;AAAqB,gBAAY,QAAQ,GAAG,OAAO,MAAM;AAAA;AAEpE,gBAAY,SAAS,WAAW,EAAE,MAAM,KAAK,CAAC;AAErD,CAAC;","names":["url"],"file":"index.js"}